<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharma 101 Learning ‚Äî RaoniX</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { font-family: 'Inter', sans-serif; }
        :root {
            --bg-primary: #030303;
            --bg-secondary: #0a0a0a;
            --text-primary: #ffffff;
            --text-secondary: #a0aec0;
            --accent: #6366f1;
            --success: #10b981;
        }
        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-secondary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
        }
        body { background: var(--bg-primary); color: var(--text-primary); }
        .card { background: var(--bg-secondary); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.05); }
        .module-card { background: var(--bg-secondary); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.05); cursor: pointer; transition: all 0.3s; }
        .module-card:hover { transform: translateY(-4px); border-color: var(--accent); }
        .progress-bar { height: 8px; background: rgba(255, 255, 255, 0.1); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #6366f1, #10b981); transition: width 0.3s; }
        .btn-primary { background: var(--accent); color: white; padding: 0.75rem 1.5rem; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .btn-primary:hover { opacity: 0.9; }
        .lesson-content { display: none; }
        .lesson-content.active { display: block; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .learning-box { background: rgba(99, 102, 241, 0.05); border-left: 4px solid var(--accent); border-radius: 8px; padding: 1rem; }
        .key-point { background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 8px; padding: 1rem; margin: 1rem 0; }
        .header { background: rgba(99, 102, 241, 0.05); border-bottom: 1px solid rgba(99, 102, 241, 0.2); padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 10; }
        .tab-btn { padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.05); border: none; border-radius: 8px; color: var(--text-primary); cursor: pointer; font-weight: 600; margin-right: 0.5rem; }
        .tab-btn.active { background: var(--accent); }
        [data-theme="light"] .module-card { background: #f1f5f9; }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="flex items-center gap-3">
            <a href="index.html" class="text-2xl font-bold">üè†</a>
            <h1 class="text-xl font-bold">Pharma 101 Learning</h1>
        </div>
        <div class="flex items-center gap-3">
            <button onclick="toggleTheme()" class="p-2 rounded-lg hover:bg-white/10">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                </svg>
            </button>
        </div>
    </div>

    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- View Toggle -->
        <div class="flex gap-2 mb-6">
            <button onclick="switchView('explore')" id="btnExplore" class="tab-btn active">üîç Explore</button>
            <button onclick="switchView('progress')" id="btnProgress" class="tab-btn">üìä Progress</button>
            <button onclick="switchView('glossary')" id="btnGlossary" class="tab-btn">üìö Glossary</button>
        </div>

        <!-- Explore View -->
        <div id="exploreView">
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="module-card" onclick="selectModule('gamp5')">
                    <div class="text-3xl mb-2">üìã</div>
                    <h3 class="font-bold mb-2">GAMP 5 Fundamentals</h3>
                    <p class="text-sm text-gray-400 mb-3">Understand the lifecycle and categories (1-5) of software in pharma.</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="module-card" onclick="selectModule('csv')">
                    <div class="text-3xl mb-2">‚úì</div>
                    <h3 class="font-bold mb-2">CSV & Validation</h3>
                    <p class="text-sm text-gray-400 mb-3">IQ, OQ, PQ phases and why they matter in pharma.</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="module-card" onclick="selectModule('21cfr')">
                    <div class="text-3xl mb-2">‚öñÔ∏è</div>
                    <h3 class="font-bold mb-2">21 CFR Part 11</h3>
                    <p class="text-sm text-gray-400 mb-3">Electronic records, signatures, and compliance requirements.</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="module-card" onclick="selectModule('riskMgmt')">
                    <div class="text-3xl mb-2">‚ö†Ô∏è</div>
                    <h3 class="font-bold mb-2">Risk Management</h3>
                    <p class="text-sm text-gray-400 mb-3">FMEA, risk assessment, and mitigation strategies.</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="module-card" onclick="selectModule('dataint')">
                    <div class="text-3xl mb-2">üîê</div>
                    <h3 class="font-bold mb-2">Data Integrity</h3>
                    <p class="text-sm text-gray-400 mb-3">ALCOA+ principles and audit trail requirements.</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="module-card" onclick="selectModule('changecontrol')">
                    <div class="text-3xl mb-2">üîÑ</div>
                    <h3 class="font-bold mb-2">Change Control</h3>
                    <p class="text-sm text-gray-400 mb-3">Managing system changes in validated environments.</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Module Content -->
            <div id="moduleContent"></div>
        </div>

        <!-- Progress View -->
        <div id="progressView" class="hidden">
            <div class="card">
                <h2 class="text-lg font-bold mb-4">Your Learning Progress</h2>
                <div id="progressContent"></div>
            </div>
        </div>

        <!-- Glossary View -->
        <div id="glossaryView" class="hidden">
            <div class="card">
                <h2 class="text-lg font-bold mb-4">Pharma Glossary</h2>
                <div id="glossaryContent"></div>
            </div>
        </div>
    </div>

    <script>
        const modules = {
            gamp5: {
                title: 'üìã GAMP 5 Fundamentals',
                lessons: [
                    {
                        title: 'Introduction to GAMP 5',
                        content: `
                            <h3 class="font-bold mb-3">What is GAMP 5?</h3>
                            <p class="mb-3">GAMP 5 (Good Automated Manufacturing Practice) is the industry standard for automated system validation in pharma. Published by ISPE.</p>
                            <div class="key-point">
                                <strong>Key Point:</strong> GAMP 5 defines software lifecycle categories that determine validation rigor.
                            </div>
                            <h3 class="font-bold mb-3 mt-4">Five Categories:</h3>
                            <ul class="list-disc ml-4 space-y-2">
                                <li><strong>Category 1:</strong> Infrastructure (OS, databases, commercial tools)</li>
                                <li><strong>Category 2:</strong> Configured commercial packages (ERP, MES)</li>
                                <li><strong>Category 3:</strong> Configured in-house systems</li>
                                <li><strong>Category 4:</strong> Custom-built systems (requires full validation)</li>
                                <li><strong>Category 5:</strong> Hybrid systems (combination approach)</li>
                            </ul>
                        `
                    },
                    {
                        title: 'Validation Approach by Category',
                        content: `
                            <h3 class="font-bold mb-3">Risk-Based Validation</h3>
                            <p class="mb-3">GAMP 5 uses risk assessment to determine the depth of validation needed for each category.</p>
                            <table class="w-full text-sm mb-4">
                                <tr class="border-b">
                                    <td class="py-2"><strong>Category</strong></td>
                                    <td class="py-2"><strong>Validation Effort</strong></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-2">1 & 2</td>
                                    <td class="py-2">Minimal (vendor data suffices)</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-2">3</td>
                                    <td class="py-2">Moderate (config + testing)</td>
                                </tr>
                                <tr>
                                    <td class="py-2">4 & 5</td>
                                    <td class="py-2">Extensive (full lifecycle)</td>
                                </tr>
                            </table>
                            <div class="key-point">
                                <strong>üí° Pro Tip:</strong> Document your rationale for category selection. It's often audited by FDA.
                            </div>
                        `
                    }
                ]
            },
            csv: {
                title: '‚úì CSV & Validation',
                lessons: [
                    {
                        title: 'CSV Phases Explained',
                        content: `
                            <h3 class="font-bold mb-3">Installation Qualification (IQ)</h3>
                            <p class="mb-3">Verify that equipment and software are installed correctly per specifications.</p>
                            <ul class="list-disc ml-4 mb-3">
                                <li>Hardware checklist</li>
                                <li>Software versions documented</li>
                                <li>Configuration verified</li>
                            </ul>
                            <h3 class="font-bold mb-3">Operational Qualification (OQ)</h3>
                            <p class="mb-3">Demonstrate that the system operates correctly within intended operating ranges.</p>
                            <ul class="list-disc ml-4 mb-3">
                                <li>Functional testing</li>
                                <li>Edge case testing</li>
                                <li>Performance validation</li>
                            </ul>
                            <h3 class="font-bold mb-3">Performance Qualification (PQ)</h3>
                            <p class="mb-3">Verify that the system produces consistent results within specified criteria over time.</p>
                            <ul class="list-disc ml-4">
                                <li>Real-world process testing</li>
                                <li>Long-term stability</li>
                                <li>Data integrity</li>
                            </ul>
                        `
                    }
                ]
            },
            '21cfr': {
                title: '‚öñÔ∏è 21 CFR Part 11',
                lessons: [
                    {
                        title: '21 CFR Part 11 Overview',
                        content: `
                            <h3 class="font-bold mb-3">Electronic Records vs. Paper</h3>
                            <p class="mb-3">21 CFR Part 11 governs when electronic records can replace paper, especially critical for pharma data integrity.</p>
                            <div class="key-point">
                                <strong>Requirements:</strong>
                                <ul class="list-disc ml-4 mt-2">
                                    <li>Digital signatures with multiple factors</li>
                                    <li>Audit trails for all data changes</li>
                                    <li>System validation and security</li>
                                </ul>
                            </div>
                            <h3 class="font-bold mb-3 mt-4">ALCOA+ Principles</h3>
                            <p class="text-sm mb-3">Data must be:</p>
                            <ul class="list-disc ml-4 space-y-1 text-sm">
                                <li><strong>A</strong>ttributable - Know who did it</li>
                                <li><strong>L</strong>egible - Clearly readable</li>
                                <li><strong>C</strong>ontemporaneous - Real-time recording</li>
                                <li><strong>O</strong>riginal - First entry recorded</li>
                                <li><strong>A</strong>ccurate - Free of errors</li>
                                <li><strong>+</strong> Complete, Consistent, Enduring</li>
                            </ul>
                        `
                    }
                ]
            },
            riskMgmt: {
                title: '‚ö†Ô∏è Risk Management',
                lessons: [
                    {
                        title: 'Risk Assessment Fundamentals',
                        content: `
                            <h3 class="font-bold mb-3">What is Risk Assessment?</h3>
                            <p class="mb-3">Systematically identify and evaluate potential failures and their impact on the process.</p>
                            <h3 class="font-bold mb-3">FMEA (Failure Mode & Effects Analysis)</h3>
                            <ul class="list-disc ml-4 space-y-2 mb-3">
                                <li><strong>Identify failure modes</strong> - What could go wrong?</li>
                                <li><strong>Assess effects</strong> - Impact on product/process?</li>
                                <li><strong>Rate severity</strong> - How serious? (1-10)</li>
                                <li><strong>Define controls</strong> - How do we prevent it?</li>
                            </ul>
                            <div class="key-point">
                                <strong>RPN (Risk Priority Number):</strong> Severity √ó Occurrence √ó Detection
                                <p class="mt-2 text-sm">Use RPN to prioritize mitigation efforts.</p>
                            </div>
                        `
                    }
                ]
            },
            dataint: {
                title: 'üîê Data Integrity',
                lessons: [
                    {
                        title: 'Data Integrity Best Practices',
                        content: `
                            <h3 class="font-bold mb-3">Why Data Integrity Matters</h3>
                            <p class="mb-3">Pharma regulators (FDA, EMA) heavily scrutinize data integrity. Failures = product recalls, warning letters.</p>
                            <div class="key-point">
                                <strong>Common Violations:</strong>
                                <ul class="list-disc ml-4 mt-2 text-sm">
                                    <li>Missing or incomplete audit trails</li>
                                    <li>Uncontrolled data deletion</li>
                                    <li>No record of who accessed what and when</li>
                                    <li>Manual overrides without justification</li>
                                </ul>
                            </div>
                            <h3 class="font-bold mb-3 mt-4">Prevention Strategies</h3>
                            <ul class="list-disc ml-4">
                                <li>Implement strong access controls</li>
                                <li>Enable complete audit trail logging</li>
                                <li>Regular data integrity audits</li>
                                <li>User training on compliance</li>
                            </ul>
                        `
                    }
                ]
            },
            changecontrol: {
                title: 'üîÑ Change Control',
                lessons: [
                    {
                        title: 'Change Control in Validated Systems',
                        content: `
                            <h3 class="font-bold mb-3">Why Change Control?</h3>
                            <p class="mb-3">Changes to validated systems can invalidate the system. Change control ensures changes are properly assessed and tested.</p>
                            <h3 class="font-bold mb-3">Change Control Process</h3>
                            <ol class="list-decimal ml-4 space-y-2 mb-3">
                                <li><strong>Request:</strong> Define the change and reason</li>
                                <li><strong>Assess:</strong> Impact analysis - what breaks?</li>
                                <li><strong>Approve:</strong> Review committee approval</li>
                                <li><strong>Implement:</strong> Execute per protocol</li>
                                <li><strong>Test:</strong> IQ/OQ/PQ as needed</li>
                                <li><strong>Document:</strong> Complete audit trail</li>
                            </ol>
                            <div class="key-point">
                                <strong>Key:</strong> Document everything. Minor changes still need justification.
                            </div>
                        `
                    }
                ]
            }
        };

        const glossary = {
            'GAMP 5': 'Good Automated Manufacturing Practice - industry standard for validation',
            'CSV': 'Computer System Validation - IQ, OQ, PQ phases',
            'IQ': 'Installation Qualification - verify correct installation',
            'OQ': 'Operational Qualification - verify correct operation',
            'PQ': 'Performance Qualification - verify consistent performance',
            'CFR': 'Code of Federal Regulations',
            'ALCOA': 'Attributable, Legible, Contemporaneous, Original, Accurate',
            'FMEA': 'Failure Mode and Effects Analysis',
            'RPN': 'Risk Priority Number = Severity √ó Occurrence √ó Detection',
            '21 CFR Part 11': 'FDA regulation on electronic records and signatures',
            'Audit Trail': 'Complete record of who did what and when',
            'Data Integrity': 'Accuracy, completeness, and consistency of data'
        };

        let currentModule = null;
        let currentLesson = 0;
        let progress = JSON.parse(localStorage.getItem('learningProgress')) || {};

        document.addEventListener('DOMContentLoaded', () => {
            applyTheme();
        });

        function selectModule(moduleName) {
            currentModule = moduleName;
            currentLesson = 0;
            renderLesson();
        }

        function renderLesson() {
            if (!currentModule) return;
            
            const module = modules[currentModule];
            const lesson = module.lessons[currentLesson];
            
            const html = `
                <div class="card mt-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold">${module.title}</h2>
                        <span class="text-sm text-gray-400">${currentLesson + 1}/${module.lessons.length}</span>
                    </div>

                    <div class="progress-bar mb-6">
                        <div class="progress-fill" style="width: ${((currentLesson + 1) / module.lessons.length) * 100}%"></div>
                    </div>

                    <h3 class="text-lg font-bold mb-4">${lesson.title}</h3>
                    <div class="learning-box mb-6">${lesson.content}</div>

                    <div class="flex gap-3">
                        ${currentLesson > 0 ? `<button onclick="selectModule('${currentModule}'); currentLesson--; renderLesson();" class="btn-primary">‚Üê Back</button>` : ''}
                        ${currentLesson < module.lessons.length - 1 ? `<button onclick="selectModule('${currentModule}'); currentLesson++; renderLesson();" class="btn-primary">Next ‚Üí</button>` : `<button onclick="markModuleComplete('${currentModule}')" class="btn-primary">‚úì Complete Module</button>`}
                    </div>
                </div>
            `;

            document.getElementById('moduleContent').innerHTML = html;
        }

        function markModuleComplete(moduleName) {
            progress[moduleName] = true;
            localStorage.setItem('learningProgress', JSON.stringify(progress));
            alert('üéâ Module completed!');
            renderProgress();
            switchView('progress');
        }

        function renderProgress() {
            const completed = Object.keys(progress).length;
            const total = Object.keys(modules).length;
            const percent = Math.round((completed / total) * 100);

            let html = `
                <div class="mb-6">
                    <h3 class="font-bold mb-2">Overall Progress: ${percent}%</h3>
                    <div class="progress-bar" style="height: 12px;">
                        <div class="progress-fill" style="width: ${percent}%"></div>
                    </div>
                </div>

                <div class="space-y-3">
            `;

            Object.keys(modules).forEach(key => {
                const isComplete = progress[key];
                html += `
                    <div class="flex items-center gap-3 p-3 rounded-lg ${isComplete ? 'bg-green-900/20' : 'bg-white/5'}">
                        <span>${isComplete ? '‚úì' : '‚≠ï'}</span>
                        <span>${modules[key].title}</span>
                        <span class="ml-auto text-xs text-gray-400">${isComplete ? 'Completed' : 'Not started'}</span>
                    </div>
                `;
            });

            html += '</div>';
            document.getElementById('progressContent').innerHTML = html;
        }

        function renderGlossary() {
            let html = '<div class="space-y-3">';
            Object.entries(glossary).forEach(([term, def]) => {
                html += `
                    <div class="learning-box">
                        <strong>${term}</strong>
                        <p class="text-sm mt-2">${def}</p>
                    </div>
                `;
            });
            html += '</div>';
            document.getElementById('glossaryContent').innerHTML = html;
        }

        function switchView(view) {
            document.getElementById('exploreView').classList.toggle('hidden', view !== 'explore');
            document.getElementById('progressView').classList.toggle('hidden', view !== 'progress');
            document.getElementById('glossaryView').classList.toggle('hidden', view !== 'glossary');

            document.getElementById('btnExplore').classList.toggle('active', view === 'explore');
            document.getElementById('btnProgress').classList.toggle('active', view === 'progress');
            document.getElementById('btnGlossary').classList.toggle('active', view === 'glossary');

            if (view === 'progress') renderProgress();
            if (view === 'glossary') renderGlossary();
        }

        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            const next = current === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        }

        function applyTheme() {
            const saved = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', saved);
        }
    </script>
</body>
</html>
